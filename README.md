# Image-processing
### Основной алгоритм находится в файле otsu_method.py. Тестовый файл находится в test.py. Запустите test.py напрямую, чтобы выполнить тестирование.

### **Цель алгоритма**: Использовать метод Отсу (алгоритм Оцу) для выполнения бинаризации (двухцветной обработки) входного цветного изображения, преобразуя его в изображение, состоящее только из черного и белого цветов.

**Шаг 1: Преобразование цветного изображения в градации серого**

- Обход каждого пикселя изображения, получение его красного (R), зеленого (G) и синего (B) компонентов.
- Использование формулы яркости для вычисления соответствующего значения серого:
  \[
  \text{Значение серого} = 0.299 \times R + 0.587 \times G + 0.114 \times B
  \]
- **Цель**: Преобразовать трехканальное цветное изображение в одноканальное изображение в градациях серого для дальнейшей обработки.

**Шаг 2: Вычисление гистограммы градаций серого**

- Инициализация массива (списка) длиной 256 (`hist`) для записи количества пикселей для каждого уровня серого (0-255). Все начальные значения равны 0.
- Обход каждого пикселя изображения в градациях серого, подсчет количества пикселей для каждого уровня серого и обновление гистограммы.
- **Цель**: Получить распределение значений серого в изображении для поддержки вычисления порогового значения.

**Шаг 3: Вычисление общего числа пикселей и суммы значений серого**

- Вычисление общего числа пикселей в изображении:
  \[
  \text{Общее количество пикселей} = \text{Высота изображения} \times \text{Ширина изображения}
  \]
- Вычисление суммы значений серого:
  \[
  \text{Сумма значений серого} = \sum_{t=0}^{255} t \times \text{hist}[t]
  \]
- **Цель**: Подготовка к дальнейшему вычислению среднего значения серого для фона и переднего плана.

**Шаг 4: Инициализация переменных**

- **Переменные**:
  - `weight_background` (вес фона): количество пикселей фона, начальное значение - 0.
  - `sum_background` (сумма значений серого фона): начальное значение - 0.
  - `max_between_class_variance` (максимальная межклассовая дисперсия): начальное значение - 0.
  - `best_threshold` (лучшее пороговое значение): начальное значение - 0.

**Шаг 5: Перебор всех возможных пороговых значений для нахождения оптимального**

- Для порогового значения `t` от 0 до 255 выполняются следующие шаги:
  1. **Обновление веса фона**:
     \[
     \text{weight\_background} += \text{hist}[t]
     \]
     Если `weight_background` равен 0, перейти к следующей итерации.
  2. **Вычисление веса переднего плана**:
     \[
     \text{weight\_foreground} = \text{Общее количество пикселей} - \text{weight\_background}
     \]
     Если `weight_foreground` равен 0, завершить цикл.
  3. **Обновление суммы значений серого для фона**:
     \[
     \text{sum\_background} += t \times \text{hist}[t]
     \]
  4. **Вычисление среднего значения серого для фона и переднего плана**:
     \[
     \text{mean\_background} = \frac{\text{sum\_background}}{\text{weight\_background}}
     \]
     \[
     \text{mean\_foreground} = \frac{\text{Сумма значений серого} - \text{sum\_background}}{\text{weight\_foreground}}
     \]
  5. **Вычисление межклассовой дисперсии**:
     \[
     \text{between\_class\_variance} = \text{weight\_background} \times \text{weight\_foreground} \times (\text{mean\_background} - \text{mean\_foreground})^2
     \]
  6. **Обновление максимальной межклассовой дисперсии и лучшего порогового значения**:
     - Если текущая `between_class_variance` больше `max_between_class_variance`, то:
       - Обновить `max_between_class_variance` на текущее значение `between_class_variance`.
       - Обновить `best_threshold` на текущее значение `t`.
- **Цель**: Найти пороговое значение, которое максимизирует межклассовую дисперсию, то есть наилучшее пороговое значение для бинаризации.

**Шаг 6: Применение наилучшего порогового значения для бинаризации**

- Обход каждого пикселя изображения в градациях серого и генерация бинарного изображения по следующим правилам:
  - Если значение серого пикселя больше `best_threshold`, установить значение пикселя в 255 (белый).
  - В противном случае установить значение пикселя в 0 (черный).
- **Цель**: Преобразовать изображение в градациях серого в бинарное изображение с использованием наилучшего порогового значения.

**Шаг 7: Вывод бинарного изображения**

- Вернуть сгенерированное бинарное изображение.
- **Цель**: Завершить процесс бинаризации изображения для его дальнейшего использования.

